import { useParams } from "react-router-dom";

import { NewsCard } from "../";
import { useEffect, useState } from "react";
import axios from "axios";

const NewsSingle = () => {
  const params = useParams();

  const [news, setNews] = useState([]);
  const [loading, setLoading] = useState(true);

  const getNews = async () => {
    const { data } = await axios.get(
      "https://jetour-mogilev.by/wp-json/wp/v2/news/?acf_format=standard"
    );

    setNews(data);
    setLoading(false);
  };

  const singleNews = news.find((el) => el.id == params.news);
  const newsByOne = news.filter((el) => el.id != params.news);

  console.log(singleNews)

  useEffect(() => {
    window.document.title = singleNews?.acf?.title;
  }, []);

  useEffect(() => {
    getNews();
  }, []);

  if (loading)
    return (
      <div className="h-screen flex justify-center items-center w-full">
        <div className="animate-pulse">Загрузка</div>
      </div>
    );

  return (
    <>
      <div>
        <img
          src={singleNews.acf.img}
          alt="phtne"
          className="w-full max-h-[390px] h-full object-cover"
        />

        <div className="lg:py-[60px] lg:px-[30px] flex justify-center items-center relative">
          <div className="lg:max-w-[1280px] w-full flex justify-start items-start">
            <div className="flex flex-col lg:mt-0 mt-[30px] lg:px-0 px-5 w-full">
              <div className="lg:ml-[200px] lg:max-w-[585px] w-full">
                <span className="text-sm leading-5 text-[#A5ADBA]">
                  {singleNews.date.slice(0, 10).split("-").join(".")}
                </span>

                <h1 className="mt-[10px] w-full font-bold md:text-[40px] md:leading-[52px] text-2xl leading-8">
                  {singleNews.acf.title}
                </h1>

                <div
                  className="mt-[30px] mb-[30px] lg:text-base text-sm lg:leading-normal leading-5"
                  dangerouslySetInnerHTML={{ __html: singleNews.acf.fulldesc }}
                />
              </div>

              <div className="lg:absolute -bottom-[54px] lg:shadowNewsShare bg-white py-[30px] lg:px-[60px]  h-[108px] lg:max-w-[1280px] w-full">
                <div className="flex lg:flex-row flex-col lg:justify-between justify-start lg:items-center items-start h-full w-full">
                  <h3 className="font-bold leading-8 text-2xl">
                    Поделись с друзьями
                  </h3>

                  <div className="flex lg:mt-0 mt-5 lg:gap-x-[60px] gap-x-5 justify-center items-center h-full">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      className="w-10 h-10 cursor-pointer hover:opacity-50"
                    >
                      <g id="svg-icon-soc-facebook" viewBox="0 0 40 40">
                        <path
                          fill="#000"
                          d="M20.002634,0 C8.95561702,0 0,8.95561702 0,20.002634 C0,31.044383 8.95561702,40 20.002634,40 C31.044383,40 40,31.044383 40,20.002634 C40,8.95561702 31.044383,0 20.002634,0 L20.002634,0 Z M29.7326485,28.4577901 C29.7326485,29.0478072 29.4429079,29.6752272 28.8581588,29.6752272 L23.9378375,29.6752272 L23.9378375,22.3000132 L26.4401422,22.3000132 L26.819439,19.1392072 L23.9378375,19.1392072 L23.9378375,17.2527328 C23.9378375,16.4098512 24.1643619,15.9784012 25.3760042,15.9784012 L27.0986435,15.9784012 L27.0986435,13.2227051 C26.5718425,13.1858291 25.7553009,13.1068089 24.6858949,13.1068089 C22.4627947,13.1068089 20.7770315,14.4659555 20.7770315,16.9629922 L20.7770315,19.1392072 L18.1430265,19.1392072 L18.1430265,22.3000132 L20.7770315,22.3000132 L20.7770315,29.6752272 L11.6528381,29.6752272 C11.062821,29.6752272 10.7678125,29.0478072 10.7678125,28.4577901 L10.7678125,11.2524694 C10.7678125,10.6624523 11.062821,10.1835901 11.6528381,10.1835901 L28.8581588,10.1835901 C29.4429079,10.1835901 29.7326485,10.6624523 29.7326485,11.2524694 L29.7326485,28.4577901 L29.7326485,28.4577901 Z"
                        ></path>
                      </g>
                    </svg>

                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      className="w-10 h-10 cursor-pointer hover:opacity-50"
                    >
                      <g id="svg-icon-soc-vk" viewBox="0 0 40 40">
                        <g
                          stroke="none"
                          strokeWidth="1"
                          fill="#000"
                          fillRule="evenodd"
                        >
                          <path d="M20,40 C8.954305,40 0,31.045695 0,20 C0,8.954305 8.954305,0 20,0 C31.045695,0 40,8.954305 40,20 C40,31.045695 31.045695,40 20,40 Z M31.8701679,25.6467094 C31.8405247,25.5828248 31.8128905,25.5298331 31.7872206,25.4873773 C31.3624837,24.7224133 30.5508228,23.7834743 29.3527291,22.6702922 L29.3274163,22.6448008 L29.3147376,22.6323007 L29.3019249,22.619488 L29.2890676,22.619488 C28.7453115,22.101134 28.4009773,21.7526033 28.2567793,21.5741639 C27.9929371,21.2342493 27.9338293,20.890183 28.0780273,20.541563 C28.1799034,20.2781672 28.5625863,19.721911 29.225183,18.8720354 C29.5737137,18.4216286 29.8497435,18.0606424 30.0535851,17.7886751 C31.5237355,15.8341889 32.1611087,14.5852464 31.9655708,14.0413564 L31.8896324,13.9142568 C31.8386051,13.837738 31.7069072,13.7677373 31.4947173,13.7038973 C31.2820363,13.6401912 31.0102029,13.6296554 30.678726,13.6721112 L27.0079707,13.6974686 C26.9485057,13.676397 26.8635941,13.6783613 26.7529678,13.7038973 C26.6424755,13.7294333 26.5872071,13.7422459 26.5872071,13.7422459 L26.5233224,13.7741659 L26.4726076,13.8125145 C26.4301071,13.837872 26.3833655,13.8824707 26.3323381,13.9462214 C26.2815786,14.0097489 26.2391228,14.0843033 26.2051939,14.1692596 C25.8055465,15.1974407 25.3511664,16.1533889 24.8412054,17.0370595 C24.5267822,17.5639851 24.238029,18.020642 23.9743207,18.4072981 C23.7109695,18.7938203 23.4900296,19.0786002 23.311724,19.2611469 C23.1331506,19.4438722 22.971988,19.5902577 22.8272543,19.7008393 C22.6827437,19.8114656 22.57243,19.8582072 22.4960452,19.8411088 C22.4194819,19.8240103 22.3473828,19.8070459 22.2791232,19.7900814 C22.1602379,19.7135627 22.0646118,19.609499 21.9925128,19.4778011 C21.9201013,19.3461032 21.8713507,19.1803424 21.8458594,18.9806527 C21.820502,18.780829 21.8055018,18.6089521 21.801216,18.4644416 C21.7972428,18.3201096 21.7990731,18.1159555 21.8076893,17.8525597 C21.8165287,17.58903 21.820502,17.4107244 21.820502,17.3172412 C21.820502,16.9942912 21.8267967,16.6437962 21.8394307,16.265667 C21.852288,15.8875378 21.8626899,15.5879362 21.8713954,15.3672194 C21.8800562,15.1462795 21.8840741,14.9125268 21.8840741,14.6660955 C21.8840741,14.4196642 21.8690739,14.2264031 21.8394307,14.0861337 C21.8101447,13.9460428 21.7651888,13.8100592 21.7059471,13.6782273 C21.6463482,13.5465294 21.5591151,13.4446533 21.4446495,13.372331 C21.3299608,13.3000981 21.1873699,13.242776 21.0176805,13.2001863 C20.5672737,13.0982655 19.9937405,13.0431309 19.296813,13.0345594 C17.7163936,13.0175949 16.7008911,13.1196497 16.2505289,13.3405896 C16.0720894,13.4339389 15.9106144,13.561485 15.7662378,13.722826 C15.613245,13.9098371 15.5919055,14.0118918 15.7023532,14.0286777 C16.2122696,14.1050625 16.5732558,14.2877877 16.7857135,14.5766749 L16.8622769,14.7297569 C16.9218311,14.8402046 16.981296,15.0357425 17.0408056,15.3161028 C17.1002259,15.5964631 17.1385746,15.9066005 17.1554498,16.2463364 C17.197861,16.8667451 17.197861,17.3978225 17.1554498,17.8396132 C17.1129047,18.2815824 17.0727256,18.6256487 17.034377,18.8720801 C16.9960284,19.1185114 16.9387063,19.3182011 16.8622769,19.4711046 C16.7857135,19.6240528 16.7347754,19.7175359 16.7092394,19.7514649 C16.6837481,19.7853938 16.6624978,19.806778 16.6456226,19.815171 C16.535175,19.8574929 16.4203076,19.8790556 16.3014224,19.8790556 C16.1823585,19.8790556 16.0379819,19.8195014 15.8680693,19.7004822 C15.6982013,19.581463 15.5219047,19.417979 15.3391795,19.2097624 C15.1564542,19.0015012 14.9503805,18.7104711 14.720869,18.3366276 C14.4915361,17.9627842 14.253587,17.5209489 14.0071556,17.0111217 L13.8032694,16.6413855 C13.6758126,16.4035257 13.5017036,16.0571825 13.2807636,15.6026685 C13.0596897,15.1479759 12.8642857,14.7081496 12.6944177,14.2832787 C12.6265152,14.1048392 12.5245051,13.9689895 12.3885661,13.8755063 L12.3247708,13.8371577 C12.2823596,13.8032287 12.2142784,13.7672015 12.1208845,13.7288083 C12.0273567,13.6904596 11.9297663,13.6629593 11.8277116,13.6460395 L8.33530649,13.6713969 C7.9784275,13.6713969 7.73628193,13.752246 7.60878051,13.913721 L7.55775315,13.9901058 C7.53226179,14.0326509 7.51940451,14.1005981 7.51940451,14.194126 C7.51940451,14.2876091 7.54489586,14.4023426 7.59592322,14.5381923 C8.10575035,15.73642 8.66017619,16.8920133 9.25920075,18.0051507 C9.85822531,19.1182882 10.3787668,20.01495 10.8205129,20.6943326 C11.2623482,21.3742063 11.7127103,22.0158652 12.1715994,22.618997 C12.6304885,23.2223519 12.9342419,23.609008 13.0828596,23.778876 C13.2316559,23.9490565 13.3485322,24.0762901 13.4334885,24.1612464 L13.7521974,24.467098 C13.9561283,24.6710735 14.2555959,24.9153619 14.6507343,25.1999633 C15.0459619,25.4847433 15.4835114,25.7651036 15.9636061,26.0414906 C16.44379,26.3174312 17.0024124,26.5426123 17.6397856,26.716766 C18.2770695,26.8910983 18.8973443,26.9610545 19.5006992,26.9273041 L20.9665192,26.9273041 C21.2637993,26.9016342 21.489025,26.808151 21.6421071,26.6468099 L21.692822,26.5829252 C21.7269295,26.5322104 21.7588495,26.4534149 21.7883141,26.3473869 C21.8181359,26.2411803 21.8329575,26.1241701 21.8329575,25.9968919 C21.824252,25.6315753 21.8520648,25.3023305 21.9156369,25.0092023 C21.9791644,24.7161633 22.051576,24.4952233 22.132559,24.346427 C22.2134974,24.1977646 22.3048377,24.0723168 22.4064907,23.9706192 C22.5083668,23.8686984 22.5809569,23.8069567 22.6235466,23.7857064 C22.6658686,23.7643223 22.6996636,23.7498132 22.7251549,23.7411077 C22.9290858,23.6731605 23.1690885,23.7389648 23.4455201,23.9388332 C23.7217286,24.1385229 23.980794,24.3850881 24.2231181,24.6781271 C24.4653083,24.971434 24.7562937,25.3005002 25.0961189,25.6658168 C25.4361674,26.0312673 25.7334921,26.3029221 25.9883164,26.4816295 L26.2431407,26.6345776 C26.4133212,26.7366323 26.6342611,26.8301155 26.9062285,26.9150718 C27.1777047,26.9999835 27.4155645,27.0212337 27.6198079,26.9787779 L30.8826569,26.9278844 C31.2053837,26.9278844 31.4565026,26.8744463 31.6346296,26.7684184 C31.8131137,26.6622118 31.9191417,26.5452016 31.9533385,26.4179234 C31.987446,26.2905112 31.9892764,26.1459561 31.9598118,25.9843471 C31.9295882,25.8231399 31.8998111,25.7104155 31.8701679,25.6467094 Z"></path>
                        </g>
                      </g>
                    </svg>

                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      className="w-10 h-10 cursor-pointer hover:opacity-50"
                    >
                      <g id="svg-icon-soc-odnoklassniki" viewBox="0 0 40 40">
                        <path
                          fill="#000"
                          d="M20,40 C8.954305,40 0,31.045695 0,20 C0,8.954305 8.954305,0 20,0 C31.045695,0 40,8.954305 40,20 C40,31.045695 31.045695,40 20,40 Z M22.1642005,24.8231035 C23.2537219,24.5962251 24.3027908,24.201654 25.2682848,23.6467884 C25.9991272,23.2250905 26.2202677,22.3422622 25.7590819,21.6714667 C25.297923,21.0006957 24.332483,20.798478 23.5989168,21.2201759 C21.4090866,22.4803375 18.5908937,22.4778714 16.4010635,21.2201759 C15.6675513,20.798478 14.7020573,21.0006957 14.2408985,21.6714667 C13.7797396,22.3397715 14.0008801,23.2250905 14.7317225,23.6467884 C15.6971895,24.201654 16.7462584,24.5962251 17.8357799,24.8231035 L14.8503832,27.5555086 C14.2382286,28.1152817 14.2382286,29.0203292 14.8503832,29.5801517 C15.1578224,29.8588175 15.5569541,29.9993835 15.9560857,29.9993835 C16.3579141,29.9993835 16.7570458,29.8588175 17.0645119,29.5801517 L20.0013386,26.8946019 L22.9381922,29.5801517 C23.5503738,30.1399494 24.5401123,30.1399494 25.1522939,29.5801517 C25.7644755,29.0203539 25.7644755,28.1128403 25.1522939,27.5555086 L22.1642005,24.8231035 Z M19.9999874,20 C22.7573354,20 25,17.7573158 25,15.0024975 C25,12.2426842 22.7573354,10 19.9999874,10 C17.2426646,10 15,12.2426842 15,15 C15,17.7573158 17.2426646,20 19.9999874,20 Z M19.9999874,12.9313824 C21.1428006,12.9313824 22.0711581,13.8597376 22.0711581,15.0025227 C22.0711581,16.1427851 21.1428006,17.0711403 19.9999874,17.0711403 C18.8597474,17.0711403 17.9288419,16.1427851 17.9288419,15.0025227 C17.9288419,13.8597376 18.8597474,12.9313824 19.9999874,12.9313824 Z"
                        ></path>
                      </g>
                    </svg>

                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      className="w-10 h-10 cursor-pointer hover:opacity-50"
                    >
                      <g id="svg-icon-soc-twitter" viewBox="0 0 40 40">
                        <path
                          fill="#000"
                          d="M20.002634,0 C8.95561702,0 0,8.95561702 0,20.002634 C0,31.044383 8.95561702,40 20.002634,40 C31.044383,40 40,31.044383 40,20.002634 C40,8.95561702 31.044383,0 20.002634,0 L20.002634,0 Z M27.6043724,15.7618859 C27.6096405,15.9409983 27.6149085,16.1201106 27.6149085,16.299223 C27.6149085,21.7832214 23.5427367,28.1101014 16.0990386,28.1101014 C13.8127222,28.1101014 11.6844462,27.4199921 9.8933228,26.2452259 C10.2094034,26.2821019 10.530752,26.303174 10.8573686,26.303174 C12.7538522,26.303174 14.5028316,25.6394047 15.8883182,24.5278546 C14.1129988,24.4909785 12.622152,23.2951403 12.105887,21.6462531 C12.3534835,21.6936652 12.606348,21.7200053 12.8644804,21.7200053 C13.2385092,21.7200053 13.6388779,21.6673252 13.9760306,21.572501 C12.121691,21.1932043 10.7678125,19.5127091 10.7678125,17.5003293 L10.7678125,17.4529172 C11.2946135,17.7584617 11.9004346,17.9481101 12.5642039,17.9691821 C11.4737258,17.2263927 10.7414724,15.9515343 10.7414724,14.5133676 C10.7414724,13.7547741 10.9311208,13.0383248 11.2788094,12.4272356 C13.2753852,14.9400764 16.2518109,16.5889635 19.6180693,16.7628078 C19.5443171,16.4572633 19.5100751,16.1411827 19.5100751,15.8198341 C19.5100751,13.5282497 21.3206901,11.6686422 23.5548532,11.6686422 C24.7190834,11.6686422 25.7716318,12.1691031 26.5091532,12.9751087 C27.4310549,12.7907283 28.2950086,12.4483077 29.0799421,11.9689187 C28.7796655,12.9382326 28.1364415,13.7547741 27.2988279,14.2657711 C28.1206374,14.1656789 28.9003029,13.9444225 29.6220203,13.6125379 C29.0846833,14.4448834 28.3945739,15.1771368 27.6043724,15.7618859 L27.6043724,15.7618859 Z"
                        ></path>
                      </g>
                    </svg>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div className="flex lg:bg-[#F3F4F5] lg:pt-[110px] pt-[55px] pb-[60px] flex-col justify-center items-center w-full">
        <div className="max-w-[1280px] lg:px-10 px-5 w-full flex flex-col justify-start items-start">
          <h3 className="font-bold md:leading-[52px] md:text-[40px] text-2xl leading-8">
            Новости
          </h3>

          <div className="mt-[60px] grid lg:grid-cols-3 md:grid-cols-2 gap-[30px] w-full">
            {newsByOne.slice(0, 3).map(({ acf, id }) => (
              <a key={id} href={`/newsall/${id}`}>
                <NewsCard img={acf.img} title={acf.title} />
              </a>
            ))}
          </div>
        </div>
      </div>
    </>
  );
};
export default NewsSingle;
